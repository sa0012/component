(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["lottery"],{"013f":function(t,e,i){var r=i("4ce5"),n=i("224c"),a=i("008a"),o=i("eafa"),l=i("5dd2");t.exports=function(t,e){var i=1==t,s=2==t,c=3==t,u=4==t,A=6==t,p=5==t||A,d=e||l;return function(e,l,y){for(var f,m,g=a(e),h=n(g),v=r(l,y,3),C=o(h.length),b=0,w=i?d(e,C):s?d(e,0):void 0;C>b;b++)if((p||b in h)&&(f=h[b],m=v(f,b,g),t))if(i)w[b]=m;else if(m)switch(t){case 3:return!0;case 5:return f;case 6:return b;case 2:w.push(f)}else if(u)return!1;return A?-1:c||u?u:w}}},2346:function(t,e,i){var r=i("75c4");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"2a38":function(t,e,i){},"2b35":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery-wrap"},[i("section",{staticClass:"lottery"},[t._m(0),i("div",{staticClass:"lottery-title-wrap"},[i("div",{staticClass:"title-bg-1"}),i("div",{staticClass:"title-bg-2"},[i("div",{staticClass:"decoration-text"},[t._v("您今天还有 "+t._s(t.remainCount)+" 次抽奖机会")])])]),i("section",{staticClass:"lottery-turnt-wrap"},[i("turnt-able",{staticClass:"lottery-turnt",attrs:{prizeList:t.prizeList,lotteryFn:t.submitLottery}}),t._m(1)],1),i("footer",{staticClass:"lottery-footer"})])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"lottery-inner-bg"},[r("img",{attrs:{src:i("f687"),alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery-turnt-base"},[i("div",{staticClass:"lottery-turnt-money"})])}],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery"},[i("div",{staticClass:"lottery-outer-container"},[i("canvas",{attrs:{id:"lottery-outer",width:320*t.px2Rem,height:320*t.px2Rem}}),i("canvas",{attrs:{id:"lottery-dot",width:320*t.px2Rem,height:320*t.px2Rem}}),i("div",{ref:"roulette",staticClass:"lottery-container"},[i("canvas",{staticClass:"lottery-canvas",attrs:{id:"lottery",width:300*t.px2Rem,height:300*t.px2Rem}}),i("ul",{staticClass:"lottery-list"},t._l(t.prizeList,(function(e,r){return i("li",{key:r,staticClass:"lottery-item"},[i("div",{staticClass:"lottery-rotate",style:{transform:"rotate("+r*t.turnNum+"turn)"}},[i("span",{staticClass:"lottery-text"},[t._v(t._s(e.prizeName))]),i("img",{staticClass:"lottery-img",attrs:{src:e.fullPrizePicture,alt:""}})])])})),0)]),i("div",{ref:"pointer",staticClass:"lottery-run-wrap"},[i("div",{staticClass:"arrow"},[i("div",{staticClass:"arrow-left",class:{disabled:t.disabled}}),i("div",{staticClass:"arrow-right",class:{disabled:t.disabled}})]),i("div",{staticClass:"lottery-run",class:{disabled:t.disabled}})]),i("button",{staticClass:"lottery-btn",class:{disabled:t.disabled},attrs:{disabled:t.disabled},on:{click:t.startLoottery}},[i("div",{staticClass:"lottery-btn-text"},[t._v("点击")]),i("div",{staticClass:"lottery-btn-text"},[t._v("抽奖")])])])])},o=[],l=(i("e204"),i("6f84"),i("6519"),0),s={name:"turntable",props:{prizeList:{type:Array,default:function(){return[]}},rotateType:{type:String,default:"roulette"},lotteryFn:{type:Function,default:function(){}}},data:function(){return{start:0,deg:0,timer:null,dialogTimer:null,prizeCount:0,turnNum:0,disabled:!1}},computed:{px2Rem:function(){var t=14,e=document.documentElement.clientWidth,i=t*(e/375),r=(i/t).toFixed(3);return r}},watch:{prizeList:{handler:function(t){var e=this;t.length>0&&this.$nextTick((function(){e.prizeCount=t.length,e.turnNum=1/e.prizeCount,e.init()}))},deep:!0,immediate:!0}},methods:{loop:function(t){var e=this,i=t.ctx,r=t.r,n=t.width,a=t.height;l>=60?(l=0,i.clearRect(0,0,n,a),this.light(i,r)):l++,window.requestAnimationFrame((function(){e.loop(t)}))},init:function(){var t=this;this.drawLottery(),this.drawOuterCircle(),this.drawDotContainer().then((function(e){t.loop(e)}))},drawOuterCircle:function(){var t=this;return new Promise((function(e,i){var r=document.querySelector("#lottery-outer"),n=r.getContext("2d");n.imageSmoothingEnabled=!0;var a=n.canvas.width,o=n.canvas.height,l=a/2;n.save(),n.beginPath(),n.translate(a/2,o/2),n.lineWidth=24*t.px2Rem;var s=n.createLinearGradient(0,0,0,l);s.addColorStop("0","#FFAB17"),s.addColorStop("0.3","#FF9E21"),s.addColorStop("0.5","#FF7A3D"),s.addColorStop("0.8","#FF8F2F"),s.addColorStop(1,"#FF7A3D"),n.strokeStyle=s,n.arc(0,0,l-n.lineWidth/2,0,2*Math.PI,!1),n.stroke(),e({ctx:n,r:l,width:a,height:o})}))},drawDotContainer:function(){var t=this;return new Promise((function(e,i){var r=document.querySelector("#lottery-dot"),n=r.getContext("2d");n.imageSmoothingEnabled=!0;var a=n.canvas.width,o=n.canvas.height,l=a/2;n.save(),n.beginPath(),n.translate(a/2,o/2),t.light(n,l),e({ctx:n,r:l,width:a,height:o})}))},drawLottery:function(){var t=document.querySelector("#lottery"),e=t.getContext("2d");e.imageSmoothingEnabled=!0;var i=360/this.prizeCount/2+90,r=e.canvas.width,n=e.canvas.height,a=r/2;e.translate(r/2,n/2);for(var o=0;o<this.prizeCount;o++)e.save(),e.beginPath(),e.moveTo(0,0),e.rotate((360/this.prizeCount*o-i)*Math.PI/180),e.arc(0,0,a-28*this.px2Rem,0,2*Math.PI/this.prizeCount,!1),e.fillStyle=o%2===0?"#fff":"#FFE459",e.fill(),e.restore();e.beginPath(),e.arc(0,0,40*this.px2Rem,0,2*Math.PI,!0),e.closePath(),e.fillStyle="#fff",e.strokeStyle="#fff",e.fill(),e.stroke()},light:function(t,e){this.start++,this.start>=2&&(this.start=0);for(var i=0;i<24;i++){var r=2*Math.PI/24*i,n=Math.cos(r)*(e-12*this.px2Rem),a=Math.sin(r)*(e-12*this.px2Rem);t.beginPath(),i%2===0?0===this.start?t.fillStyle="#fff":t.fillStyle="#FBD700":0===this.start?t.fillStyle="#FBD700":t.fillStyle="#fff",t.arc(n,a,5*this.px2Rem,0,2*Math.PI,!1),t.fill()}},runRotateFn:function(t,e){var i=this,r=this.$refs[this.rotateType],n="rotate(".concat(t,"deg)");"pointer"===this.rotateType&&(n="translate(-50%, -50%) rotate(".concat(t,"deg)")),r.style["transform"]=n,r.style["transition"]="all 6s ease",this.dialogTimer=setTimeout((function(){var t=e.prizeName||"";i.$spikeDialog.alert({iconType:"success",title:"恭喜您",message:"获得".concat(t),confirmFn:function(){i.$spikeDialog.hide(),i.disabled=!1}})}),6100)},handleLottery:function(t){var e=this.prizeList.findIndex((function(e){return e.productNo===t.productNo}));this.deg=this.deg+(360-this.deg%360)+(3600-e*(360/this.prizeCount)),this.runRotateFn(this.deg,t)},startLoottery:function(){var t=this;this.disabled=!0,this.lotteryFn&&"function"===typeof this.lotteryFn&&this.lotteryFn(this.handleLottery).catch((function(e){console.log(e),t.disabled=!1}))}},destroyed:function(){window.cancelAnimationFrame(this.timer)}},c=s,u=c,A=(i("7c71"),i("e90a")),p=Object(A["a"])(u,a,o,!1,null,null,null),d=p.exports,y=[{productNo:"OP2000000458",activityCode:"AC2000000196",prizePictures:"null/1583938439010_Slice 1.png",prizeType:"实物礼品",prizeLevel:"1",prizePrice:null,prizeNum:"1",prizeGetWay:"",probability:1,probabilityPeople:1,probabilityDay:1,needInventory:"Y",remainingInventory:1,consumptionInventory:0,prizeName:"88元续保抵用券",fullPrizePicture:i("728e")},{productNo:"OP2000000459",activityCode:"AC2000000196",prizePictures:"null/1583938466857_Slice 1.png",prizeType:"实物礼品",prizeLevel:"2",prizePrice:null,prizeNum:"2",prizeGetWay:"",probability:2,probabilityPeople:1,probabilityDay:1,needInventory:"Y",remainingInventory:2,consumptionInventory:0,prizeName:"壳牌5-30W机油1L",fullPrizePicture:i("aad1")},{productNo:"OP2000000460",activityCode:"AC2000000196",prizePictures:"null/1583938491022_Slice 1.png",prizeType:"虚拟礼品",prizeLevel:"3",prizePrice:null,prizeNum:"4",prizeGetWay:"",probability:3,probabilityPeople:1,probabilityDay:1,needInventory:"Y",remainingInventory:4,consumptionInventory:0,prizeName:"保养工时抵用券",fullPrizePicture:i("728e")},{productNo:"OP2000000461",activityCode:"AC2000000196",prizePictures:"null/1583938520077_Slice 1.png",prizeType:"虚拟礼品",prizeLevel:"4",prizePrice:null,prizeNum:"20",prizeGetWay:"PICK_UP_STORE",probability:5,probabilityPeople:1,probabilityDay:1,needInventory:"Y",remainingInventory:20,consumptionInventory:0,prizeName:"壳牌5-30W机油4L",fullPrizePicture:i("3cac")},{productNo:"OP2000000462",activityCode:"AC2000000196",prizePictures:null,prizeType:"谢谢参与",prizeLevel:null,prizePrice:null,prizeNum:null,prizeGetWay:"",probability:10,probabilityPeople:null,probabilityDay:null,needInventory:"Y",remainingInventory:0,consumptionInventory:0,prizeName:"马牌机滤一个",fullPrizePicture:i("7934")},{productNo:"OP2000000463",activityCode:"AC2000000196",prizePictures:null,prizeType:"谢谢参与",prizeLevel:null,prizePrice:null,prizeNum:null,prizeGetWay:"",probability:10,probabilityPeople:null,probabilityDay:null,needInventory:"Y",remainingInventory:0,consumptionInventory:0,prizeName:"谢谢参与",fullPrizePicture:i("7377")}];function f(){return{activityCode:"",activityName:"",activityUrl:"",status:"",startDate:"",endDate:"",rgb:"",activityPhone:"",activityAddress:"",activityDesc:"",dealerCode:"00000",dealerName:"测试数据",activitySessionList:[],lotteryProductMOList:[{}],participateNum:"",participateType:""}}var m={name:"lottery",data:function(){return{lotteryDetails:f(),activityCode:"",remainCount:0,prizeFlag:"",prizeList:y,isShowturnt:!1,timer:null}},methods:{submitLottery:function(t){var e=this;return new Promise((function(r,n){if(0===e.remainCount)return e.$spikeDialog.alert({title:"",iconType:"warn",message:"您的抽奖机会已用完！",confirmFn:function(){e.$spikeDialog.hide(),n(new Error)}});e.timer=setTimeout((function(){t({productNo:"OP2000000460",activityCode:"AC2000000196",prizeLevel:3,prizePrice:null,prizeNum:4,prizeGetWay:"",probability:3,probabilityPeople:1,probabilityDay:1,needInventory:"Y",remainingInventory:4,consumptionInventory:0,prizeName:"保养工时抵用券",fullPrizePicture:i("728e")})}),1e3)}))},queryActivityRules:function(t){var e=this;this.$spikeDialog.alert({title:"活动规则",confirmBtnText:"我知道了",message:t,confirmFn:function(){e.$spikeDialog.hide()}})}},created:function(){this.remainCount=10},components:{TurntAble:d},destored:function(){clearTimeout(this.timer)}},g=m,h=g,v=(i("b5eb"),Object(A["a"])(h,r,n,!1,null,"57b04522",null));e["default"]=v.exports},"3cac":function(t,e,i){t.exports=i.p+"static/img/icon-3.6d1b7cc3.png"},"5dd2":function(t,e,i){var r=i("81dc");t.exports=function(t,e){return new(r(t))(e)}},6519:function(t,e){(function(){var t=0,e=["ms","moz","webkit","o"];window.test=window.setTimeout;for(var i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),r=Math.max(0,1e3/60-(i-t)),n=window.setTimeout((function(){e(i+r)}),r);return t=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})()},"6f84":function(t,e,i){var r=i("e46b");r(r.P,"Array",{fill:i("b88d")}),i("0e8b")("fill")},"728e":function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHCAgICAgICAgICD/2wBDAQcHBw0MDRgQEBgaFREVGiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICD/wAARCAA3ACkDAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAAQGAgMFAQf/xAA1EAABAwMCAgYHCQEAAAAAAAABAgMEAAUREiETMQYHFCIyQSNRUlVhgaEWFxhCU1SSk7HB/8QAGwEAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAArEQACAgECAwYHAQAAAAAAAAAAAQIRAwQSITFRBRQVYXGRExZBUmKh0SL/2gAMAwEAAhEDEQA/AG7zeJt9nOT57inVOKKm21ElLaSdkIB5AV4LU6meSVtn1jTaaGnjsgqr9+ol2dn2RVFjG5h2dn2aLDcw7Oz7IosNzNsSRJt76ZUB1caS3ul1s6T9PL4VZjzSg7TpleXHHIts0pIuPv0vn7Jn61t+Nz6IwflPF9zIZyO7FPCc8t0rHhUk8lJPmDXnITU+KN+ORT4oyjR5Ep9EeOguPOHCUCpN0cnNQVvgikHV7eizrLrAc/S1K/3GKW73EzPGMV8nROzIkqFIXHkoLbyOaT/z10xGSatGljyRmrjxRqQ068sNNJK3F7JSK7KSirfIm5JcXyN32dT7yif2Cl++/hL2I99/CXsc63XeVGjoZIRIjJzpjvDUkZ56TspPyNM5dOpO+UuqLMumi3a4Pqi66uX4MqXLdRG4EhtCQO/rGlR30ggEcvWaQ1UZRXF2vQwe2FOMUm7Q5Iul4R0zTBTxDCW4h3T6XGkJ4ZwQnGjKwo/lyNzQoR+Ff1KI4cb027hury9ff9i/WQ/b4qoDrzJdfc4iUpSvRlKdJ32UcAn60aSMpXTos7H3vck6RDyr7IW0tqO2iGytOlaWQdSgfJS1EqI+GcU5DSq7k3J+f8N+GlV3L/T8/wCE/mnTRGmlejFRZSzo2W9zLRPTMinvjZaD4VJPNJqrJiU1TFtTpo5obZFsete2Y4ptbplBOkEKRjB8tfix8qS8PfXgYD7Eyctyoh73fJ97uRnzMJwNDDCfC2jOcfE+s0/jxKEaRtaLRrDGkIqV3TUx0R1VMvGWj6MVxlTMyaiRPK6dDNAHijsaAEt6mXjDZ7grjKmZVwAoAKAAnY0HBPNTLil6ZdE7h0UuzkGYnLJUow3gUniNZ7qiAcg45g0xqtM8UqZldna+Gqx7o8/r5M4PGRS1GhQcdNFBQcdFFBR0bFZblf7ii22xsOSnOQUoIAHmSVY5VbhwSySqPMW1Wphp4b58Ej61+HWD71c/gK2/B11PI/OE/sR//9k="},7377:function(t,e){t.exports="data:image/png;base64,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"},7934:function(t,e,i){t.exports=i.p+"static/img/icon-4.7ffdcb1e.png"},"7c71":function(t,e,i){"use strict";var r=i("2a38"),n=i.n(r);n.a},"81dc":function(t,e,i){var r=i("fb68"),n=i("2346"),a=i("cb3d")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}},aad1:function(t,e,i){t.exports=i.p+"static/img/icon-2.5cf098a0.png"},b5eb:function(t,e,i){"use strict";var r=i("e86f"),n=i.n(r);n.a},b88d:function(t,e,i){"use strict";var r=i("008a"),n=i("f58a"),a=i("eafa");t.exports=function(t){var e=r(this),i=a(e.length),o=arguments.length,l=n(o>1?arguments[1]:void 0,i),s=o>2?arguments[2]:void 0,c=void 0===s?i:n(s,i);while(c>l)e[l++]=t;return e}},e204:function(t,e,i){"use strict";var r=i("e46b"),n=i("013f")(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),r(r.P+r.F*o,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("0e8b")(a)},e86f:function(t,e,i){},f687:function(t,e,i){t.exports=i.p+"static/img/bg2.0d4bf1f4.png"}}]);