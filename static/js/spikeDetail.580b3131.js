(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["spikeDetail"],{"0a46":function(t,e,i){},"0c9a":function(t,e,i){"use strict";var s=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new a,i.append(t),i=i.getBlob()}catch(r){i=new Blob([t])}return new Worker(s.createObjectURL(i))}catch(r){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(r){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},"2cb1":function(t,e,i){"use strict";var s=i("0a46"),a=i.n(s);a.a},"3f14":function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r}));i("f548");var s={S_101:"即将开始",S_102:"抢购中",S_103:"已结束"},a={PICK_UP_STORE:"到店领取",POST:"邮寄",NOT_DELIVERY:"无需配送"},r=function(t,e){if(t&&e){var i=t+" "+e,s=+new Date(i);return s}}},6519:function(t,e){(function(){var t=0,e=["ms","moz","webkit","o"];window.test=window.setTimeout;for(var i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),s=Math.max(0,1e3/60-(i-t)),a=window.setTimeout((function(){e(i+s)}),s);return t=i+s,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})()},"6f14":function(t){t.exports=JSON.parse('{"result":{"activityCode":"AC2000000233","activityName":"六七秒杀活动3六七秒杀活动3六七秒杀活动3","dealerCode":"VW860003","dealerName":"广东测试二","status":"ONGOING","startDate":"2020-03-12","endDate":"2020-03-14","bannerUrl":"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2592795773,3596234100&fm=26&gp=0.jpg","fullBannerUrl":"","rgb":"#fff","activityPhone":null,"activityAddress":null,"activityRule":null,"activityDesc":null,"autoCancelSecond":null,"needAutoCancel":"N","activitySessionList":[{"startTime":"22:10:00","endTime":"22:20:00","sessionCode":"ACS2000000348","sessionName":"！","status":"S_102","sessionProductList":[{"id":1210,"productNo":"OP2000000648","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试111","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_102"},{"id":1210,"productNo":"OP2000000648","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试111","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_102"}],"lotteryProductMOs":null},{"startTime":"22:25:00","endTime":"22:35:00","sessionCode":"ACS2000000348","sessionName":"！","status":"S_101","sessionProductList":[{"id":1210,"productNo":"OP2000000649","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试222","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_101"},{"id":1210,"productNo":"OP2000000649","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试222","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_101"}],"lotteryProductMOs":null},{"startTime":"22:45:00","endTime":"23:00:00","sessionCode":"ACS2000000348","sessionName":"！","status":"S_101","sessionProductList":[{"id":1210,"productNo":"OP2000000650","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试333","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_101"},{"id":1210,"productNo":"OP2000000650","dealerCode":"VW860003","dealerName":"广东测试二","productName":"产品测试333","productLogoUrl":"activity/productStore/1584003597399_Tulips.jpg","fullProductLogoUrl":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1587988692169&di=2b24e304feab485df7c45357210c723e&imgtype=0&src=http%3A%2F%2Fimg13.360buyimg.com%2FpopWaterMark%2Fjfs%2Ft169%2F294%2F889203692%2F210213%2Fbebdde46%2F539bdab8N24d5795e.jpg","marketPrice":9999,"seckillPrice":0.01,"remainingInventory":9999,"needPurchaseLimit":"N","purchaseLimitCount":null,"deliveryMethod":"PICK_UP_STORE","createUser":"sit-test","createTime":1584003624000,"status":"S_101"}],"lotteryProductMOs":null}],"activityUrl":null,"currentTimeMillis":1584007646870},"errorMessges":null,"warningMessage":null,"status":"100"}')},"78d9":function(t,e,i){"use strict";var s=i("b3c0"),a=i.n(s);a.a},af29:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail"},[i("section",{staticClass:"detail-banner"},[i("img",{staticClass:"detail-banner-img",attrs:{src:t.prodDetails.fullProductLogoUrl,alt:""}})]),i("section",{staticClass:"detail-status"},[i("div",{staticClass:"detail-status-price"},[i("div",{staticClass:"cb-price"},[i("span",{staticClass:"cb-price-char"},[t._v("￥")]),i("span",{staticClass:"cb-price-num"},[t._v(t._s(t.prodDetails.seckillPrice))]),i("del",{staticClass:"cb-price-del"},[t._v("￥"+t._s(t.prodDetails.marketPrice))])]),t._m(0)]),i("div",{staticClass:"detail-status-timer"},[i("div",{staticClass:"timer-title"},[t._v("距离结束还剩")]),i("count-down",{attrs:{timestamp:t.countTime}})],1)]),i("section",{staticClass:"detail-name-wrap"},[i("h2",{staticClass:"prod-name"},[t._v(t._s(t.prodDetails.productName))]),i("div",{staticClass:"prod-status"},[t._v(t._s(t.deliveryStatus[t.prodDetails.deliveryMethod]))])]),i("section",{staticClass:"buy-wrap"},[i("div",{staticClass:"buy-title"},[t._v("购买数量")]),i("div",{staticClass:"buy-count"},[i("span",{staticClass:"count-reduce count-inline",class:{isDisabled:1===t.number},on:{click:t.handleReduce}},[t._v("-")]),i("span",{staticClass:"count-num"},[t._v(t._s(t.number))]),i("span",{staticClass:"count-add count-inline",class:{isDisabled:t.number===t.maxNum},on:{click:t.handleAdd}},[t._v("+")])])]),i("section",{staticClass:"store-wrap"},[i("div",{staticClass:"store-name"},[t._v("门店信息")]),i("div",{staticClass:"store-address"},[t._v(t._s(t.prodList.dealerName))])]),i("section",{staticClass:"submit-wrap"},[i("div",{staticClass:"submit-price"},[i("span",{staticClass:"sp-total"},[t._v("总价")]),i("span",{staticClass:"sp-char"},[t._v("￥")]),i("span",{staticClass:"sp-num"},[t._v(t._s(t.total))])]),i("button",{staticClass:"submit-btn",class:{disabled:t.isDisabled},attrs:{disabled:t.isDisabled},on:{click:t.submit}},[t._v("提交订单")])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"price-status"},[i("i",{staticClass:"iconfont icon-aclock price-status-clock"}),i("div",{staticClass:"price-status-text"},[t._v("限时抢购中")])])}],r=i("025e"),n=i("3f14"),o=i("e902"),c=i("6f14"),u={name:"spikeDetail",data:function(){return{deliveryStatus:n["b"],number:1,maxNum:0,total:0,productNo:"",activityCode:"",sessionCode:"",productIndex:0,timer:null,countTime:0,isDisabled:!1}},components:{CountDown:o["a"]},computed:{prodList:function(){var t=c.result;return t.currentTimeMillis=+new Date,t},currentTimeStamp:function(){var t=this.prodList.currentTimeMillis;return t?Object(r["c"])(new Date(t),"yyyy/MM/dd"):null},prodDetails:function(){var t=this,e=this.prodList.activitySessionList||[];console.log(e,"list");var i=(e[this.productIndex]||{}).sessionProductList||[];if(!e||!i)return[];var s=i.filter((function(e){return e.productNo===t.productNo&&"S_102"===e.status}))[0]||{};if("S_102"===s.status){var a=e[this.productIndex]||{};this.maxNum=s.remainingInventory||1,this.total=(s.seckillPrice*this.number).toFixed(2);var r=a.endTime||"";this.sessionCode=a.sessionCode||"";var o=Object(n["a"])(this.currentTimeStamp,r);this.countTime=o-this.prodList.currentTimeMillis,console.log(this.countTime,r,"countTime")}return s}},methods:{handleReduce:function(){this.number>1&&(this.number--,this.total=(this.price*this.number).toFixed(2))},handleAdd:function(){this.number<this.maxNum&&(this.number++,this.total=(this.price*this.number).toFixed(2))},validateSubmit:function(t){return t.activityCode?t.sessionCode?t.productNo?!!t.openid||this.$toast.text("用户 openId 不能为空！"):this.$toast.text("商品代码不能为空！"):this.$toast.text("场次代码不能为空！"):this.$toast.text("活动代码不能为空！")},submit:function(){console.log("提交订单")}},created:function(){var t=this.$route.query||{};this.productNo=t.productNo,this.productIndex=t.productIndex,this.activityCode=r["d"].getQueryString("activityCode")},beforeRouteEnter:function(t,e,i){i((function(t){t.isDisabled=!1}))},destory:function(){clearTimeout(this.timer)}},l=u,d=l,m=(i("2cb1"),i("e90a")),p=Object(m["a"])(d,s,a,!1,null,"d4803222",null);e["default"]=p.exports},b3c0:function(t,e,i){},e902:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"countdownHolder",attrs:{id:"countdown"}},[i("div",{staticClass:"position"},[i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.hourLeft))]),i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.hourRight))])]),i("div",{staticClass:"countDiv"}),i("div",{staticClass:"position"},[i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.minutesLeft))]),i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.minutesRight))])]),i("div",{staticClass:"countDiv"}),i("div",{staticClass:"position"},[i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.secondsLeft))]),i("span",{staticClass:"digit"},[t._v(t._s(t.timeStamps.secondsRight))])])])},a=[],r=(i("163d"),i("6519"),i("025e")),n=i("f038"),o=i.n(n),c={name:"timeStamps",props:{currentSelect:{type:Number|String,default:0},timestamp:{type:String|Number,default:""}},data:function(){return{timeStamps:{hourLeft:0,hourRight:0,minutesLeft:0,minutesRight:0,secondsLeft:0,secondsRight:0},timer:null,firstCount:!0,remainTimestamp:0,then:0,worker:null}},methods:{countDown:function(t){var e=Math.ceil(t/1e3);if(e>=0){var i=e%60<10?"0"+e%60:e%60,s=e/3600<10?"0"+parseInt(e/3600):parseInt(e/3600),a=(e-3600*s)/60<10?"0"+parseInt((e-3600*s)/60):parseInt((e-3600*s)/60);this.timeStamps.hourLeft=Math.floor(s/10),this.timeStamps.hourRight=s%10,this.timeStamps.minutesLeft=Math.floor(a/10),this.timeStamps.minutesRight=a%10,this.timeStamps.secondsLeft=Math.floor(i/10),this.timeStamps.secondsRight=i%10,e--,e<0&&(this.$emit("currentIndex",this.currentSelect),r["a"].clearInterval(this.timer))}},cacheTimestamp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.remainTimestamp>0&&this.then?(this.remainTimestamp-=t-this.then,this.then=t,this.countDown(this.remainTimestamp)):r["a"].clearInterval(this.timer)},createWorker:function(t){this.worker=new o.a,this.worker.postMessage({value:t});var e=this;this.worker.onmessage=function(t){e.countDown(t.data.value)}}},watch:{timestamp:{handler:function(t){this.countDown(t),"undefined"!==typeof o.a?(this.worker=null,this.createWorker(t)):(this.remainTimestamp=t,this.then=Date.now(),this.timer=r["a"].setInterval(this.cacheTimestamp,1e3))},immediate:!0}},beforeDestroy:function(){this.worker=null,r["a"].clearInterval(this.timer)}},u=c,l=(i("78d9"),i("e90a")),d=Object(l["a"])(u,s,a,!1,null,"9d5013f8",null);e["a"]=d.exports},f038:function(t,e,i){t.exports=function(){return i("0c9a")('(function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="47a0")})({"47a0":function(e,t){self.onmessage=function(e){var t=e.data.value,n=setInterval((function(){t-=1e3,t>0?self.postMessage({value:t}):(clearInterval(n),self.postMessage({value:0}),self.close())}),1e3)}}});',i.p+"0169ff7eca2a364b4edd.worker.js")}}}]);